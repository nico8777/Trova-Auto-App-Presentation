<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Trova Auto ‚Äì Ricorda dove parcheggi</title>
<meta name="description" content="Trova Auto: ricorda dove parcheggi e ritrovala in pochi secondi. Demo interattiva, funzioni, screenshot e prezzi.">
<link rel="icon" href="assets/icon.png">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
:root{--bg:#0f172a;--card:#fff;--muted:#64748b;--ink:#0b1220;--primary:#1f2f6b;--primary-ink:#fff;--accent:#2563eb;--danger:#ef4444;--chip:#e2e8f0;--radius:14px}
*{box-sizing:border-box}html,body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:#f6f7fb}
a{color:var(--accent);text-decoration:none}.container{max-width:1100px;margin:0 auto;padding:20px}
.header{position:sticky;top:0;z-index:50;background:rgba(15,23,42,.98);backdrop-filter:saturate(140%) blur(6px);color:#fff;border-bottom:1px solid #0b1220}
.header .wrap{display:flex;align-items:center;gap:14px;padding:12px 0}
.brand{display:flex;align-items:center;gap:10px}
.brand img{width:28px;height:28px;border-radius:8px}
.brand b{font-size:18px}
.nav{display:flex;gap:14px;margin-left:18px}
.nav a{color:#cbd5e1}.nav a:hover{color:#fff}
.controls{margin-left:auto;display:flex;align-items:center;gap:10px}
.select{border-radius:999px;border:1px solid #334155;background:#0b1220;color:#cbd5e1;padding:8px 12px}
.switch{display:flex;align-items:center;gap:8px;font-size:13px}
.hero{display:grid;grid-template-columns:1.1fr 1fr;gap:28px;align-items:start;margin:18px 0}
.hero h1{font-size:40px;line-height:1.05;margin:.2rem 0 1rem}
.badges{display:flex;flex-wrap:wrap;gap:10px;margin:14px 0 20px}
.badge{background:var(--chip);border-radius:999px;padding:7px 12px;font-size:14px}
.actions{display:flex;gap:10px;flex-wrap:wrap}
.btn{border:0;border-radius:999px;padding:12px 16px;font-weight:600;cursor:pointer}
.btn-primary{background:var(--primary);color:var(--primary-ink)}
.btn-ghost{background:#e8ecff;color:#1f2f6b}
.card{background:var(--card);border-radius:var(--radius);box-shadow:0 10px 30px rgba(2,8,23,.08);padding:18px}
.phone{border-radius:12px;overflow:hidden;border:1px solid #e2e8f0;background:#fff}
.phone img{display:block;width:100%}
.demo{margin-top:28px;display:grid;grid-template-columns:1fr 360px;gap:22px}
.mapwrap{background:#fff;border-radius:var(--radius);box-shadow:0 10px 30px rgba(2,8,23,.08);padding:14px}
.toolbar{display:flex;gap:8px;align-items:center;justify-content:space-between;margin:6px 0 12px}
.group{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
.select-white{border-radius:999px;border:1px solid #e2e8f0;padding:9px 12px;background:#fff}
.canvas{border-radius:12px;border:1px solid #e2e8f0;width:100%;height:420px;display:block;background:#f5f7ff}
.legend{font-size:12px;color:var(--muted);margin-top:6px}
.side{display:flex;flex-direction:column;gap:12px}
.panel{background:#fff;border-radius:var(--radius);box-shadow:0 10px 30px rgba(2,8,23,.08);padding:14px}
.panel h3{margin:0 0 10px}
.list{display:flex;flex-direction:column;gap:12px;max-height:420px;overflow:auto}
.item{border:1px solid #e2e8f0;border-radius:12px;padding:12px}
.item h4{margin:0 0 6px;font-size:16px}
.chips{display:flex;gap:6px;flex-wrap:wrap;margin-top:6px}
.chip{background:#f1f5f9;border-radius:999px;padding:4px 8px;font-size:12px}
.row{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
.btn-sm{padding:8px 10px;border-radius:10px;font-weight:600;border:1px solid #e2e8f0;background:#fff;cursor:pointer}
.btn-sm.primary{background:var(--primary);color:#fff;border-color:var(--primary)}
.btn-sm.danger{background:#fde2e2;color:#b91c1c;border-color:#fecaca}
.btn-sm.ghost{background:#eef2ff;color:#1f2f6b;border-color:#dbeafe}
.meta{font-size:12px;color:var(--muted)}
.section{padding:50px 0}
.cards{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
.fcard{background:#fff;border:1px solid #e2e8f0;border-radius:14px;padding:16px}
.gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
.gallery img{width:100%;display:block;border-radius:12px;border:1px solid #e2e8f0}
.pricing{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
.pcard{background:#fff;border:1px solid #e2e8f0;border-radius:16px;padding:18px}
.pcard h3{margin:0}
.pcard ul{margin:10px 0 0;padding-left:18px}
.footer{color:var(--muted);text-align:center;padding:30px 0 50px}
@media (max-width:980px){
  .hero{grid-template-columns:1fr}
  .demo{grid-template-columns:1fr}
  .gallery{grid-template-columns:1fr 1fr}
  .cards{grid-template-columns:1fr}
  .pricing{grid-template-columns:1fr}
}
</style>
</head>
<body>

<header class="header">
  <div class="container wrap">
    <div class="brand"><img src="assets/icon.png" alt="Trova Auto"><b>Trova Auto</b></div>
    <nav class="nav">
      <a href="#demo" id="n_demo">Demo</a>
      <a href="#features" id="n_feat">Funzioni</a>
      <a href="#shots" id="n_shots">Screenshot</a>
      <a href="#pricing" id="n_price">Prezzi</a>
      <a href="#faq" id="n_faq">FAQ</a>
    </nav>
    <div class="controls">
      <select id="langSelect" class="select" aria-label="Language">
        <option value="it">Italiano</option><option value="en">English</option><option value="de">Deutsch</option>
      </select>
      <label class="switch"><input type="checkbox" id="proToggle"><span id="lblSimulaPro">Simula Pro</span></label>
    </div>
  </div>
</header>

<main class="container">

  <section class="hero">
    <div>
      <h1 id="t_title"></h1>
      <p id="t_sub"></p>
      <div class="badges">
        <span class="badge">üíæ <span id="t_badgeSave"></span></span>
        <span class="badge">üß≠ <span id="t_badgeRoute"></span></span>
        <span class="badge">üåê <span id="t_badgeLang"></span></span>
        <span class="badge">üîó <span id="t_badgeShare"></span></span>
      </div>
      <div class="actions">
        <a class="btn btn-primary" href="#demo" id="b_demo"></a>
        <a class="btn btn-ghost" href="#pricing" id="b_dl"></a>
      </div>
    </div>
    <div class="card phone"><img src="assets/promo.jpg" alt="Trova Auto in uso"></div>
  </section>

  <section class="demo" id="demo" aria-label="Demo">
    <div class="mapwrap">
      <div class="toolbar">
        <div class="group">
          <button id="btnSaveHere" class="btn btn-primary"></button>
          <button id="btnAddRandom" class="btn"></button>
          <button id="btnClear" class="btn"></button>
        </div>
        <div class="group">
          <select id="modeSelect" class="select-white" aria-label="Route mode">
            <option value="walk">A piedi</option><option value="drive">In auto</option>
          </select>
        </div>
      </div>
      <canvas id="map" class="canvas" width="1000" height="600"></canvas>
      <div class="legend" id="legend"></div>
    </div>
    <div class="side">
      <div class="panel">
        <h3 id="t_saved"></h3>
        <div class="meta" id="t_limit"></div>
        <div class="list" id="list"></div>
      </div>
      <div class="panel">
        <h3 id="sel_title"></h3>
        <div id="currentMeta" class="meta"></div>
      </div>
    </div>
  </section>

  <section id="features" class="section">
    <h2 id="h_feat"></h2>
    <div class="cards">
      <div class="fcard"><b id="f1_t"></b><p id="f1_b"></p></div>
      <div class="fcard"><b id="f2_t"></b><p id="f2_b"></p></div>
      <div class="fcard"><b id="f3_t"></b><p id="f3_b"></p></div>
      <div class="fcard"><b id="f4_t"></b><p id="f4_b"></p></div>
      <div class="fcard"><b id="f5_t"></b><p id="f5_b"></p></div>
      <div class="fcard"><b id="f6_t"></b><p id="f6_b"></p></div>
    </div>
  </section>

  <section id="shots" class="section">
    <h2 id="h_shots"></h2>
    <div class="gallery">
      <img src="assets/screen1.jpg" alt="">
      <img src="assets/screen2.jpg" alt="">
      <img src="assets/screen3.jpg" alt="">
      <img src="assets/screen4.jpg" alt="">
      <img src="assets/screen5.jpg" alt="">
      <img src="assets/icon.png" alt="">
    </div>
  </section>

  <section id="pricing" class="section">
    <h2 id="h_price"></h2>
    <div class="pricing">
      <div class="pcard">
        <h3 id="p_base"></h3>
        <ul><li id="pb1"></li><li id="pb2"></li><li id="pb3"></li></ul>
      </div>
      <div class="pcard">
        <h3 id="p_pro"></h3>
        <ul><li id="pp1"></li><li id="pp2"></li><li id="pp3"></li></ul>
      </div>
    </div>
  </section>

  <section id="faq" class="section">
    <h2 id="h_faq"></h2>
    <details class="fcard"><summary id="q1"></summary><p id="a1"></p></details>
    <details class="fcard"><summary id="q2"></summary><p id="a2"></p></details>
    <details class="fcard"><summary id="q3"></summary><p id="a3"></p></details>
  </section>

  <section class="footer">¬© Trova Auto ‚Äî Demo statica. Nessuna posizione reale.</section>
</main>

<script>
const STR={
  it:{title:"Trova Auto: ricorda dove parcheggi e ritrovala in pochi secondi",
      sub:"Ideale per parcheggi affollati, viaggi o eventi. Ti guida passo dopo passo fino al punto esatto.",
      badgeSave:"Memorizza fino a 3 posizioni nella versione Base.",badgeRoute:"Vedi la posizione dell‚Äôauto e segui il percorso.",
      badgeLang:"Italiano, inglese e tedesco.",badgeShare:"Invia la posizione salvata via social o app di messaggistica.",
      saved:"Salvataggi",limit:"Limite versione base: 3 posizioni",simPro:"Simula Pro",none:"Nessuna posizione selezionata",
      n_demo:"Demo",n_feat:"Funzioni",n_shots:"Screenshot",n_price:"Prezzi",n_faq:"FAQ",
      b_demo:"Prova la Demo",b_dl:"Scarica quando sar√† disponibile",
      btnSave:"Salva qui",btnRand:"Aggiungi posizione casuale",btnClear:"Svuota",
      legend:"Clic sulla mappa per piazzare il segnaposto ‚Ä¢ coordinate simulate",sel:"Dettagli selezionati",
      featTitle:"Funzionalit√† principali",
      features:[["Salvataggi rapidi","Memorizza fino a 3 posizioni nella versione Base (illimitati in Pro)."],
                ["Percorsi guidati","Visualizza la posizione dell‚Äôauto e il percorso stimato a piedi o in auto."],
                ["Multilingua","Italiano, inglese e tedesco fin da subito."],
                ["Interfaccia chiara","Pulsanti grandi e design pulito per l‚Äôuso immediato."],
                ["Condivisione","Invia la posizione salvata via social o app di messaggistica."],
                ["Privacy","Dati solo sul dispositivo. Nessun login richiesto."]],
      shotsTitle:"Screenshot",priceTitle:"Versioni",
      base:"Base ¬∑ Gratis",pro:"Pro (in arrivo) ¬∑ TBD",
      pb:["Fino a 3 salvataggi","Banner pubblicitari","Condivisione posizione"],
      pp:["Salvataggi illimitati","Nessuna pubblicit√†","Funzioni avanzate dedicate"],
      faqTitle:"FAQ",
      q:["Funziona nei parcheggi sotterranei?","Serve un account?","Come condivido la posizione?"],
      a:["S√¨. Puoi salvare manualmente la posizione anche senza GPS.",
         "No, tutto √® salvato localmente sul dispositivo.",
         "Usa il pulsante ‚ÄúCondividi‚Äù che apre il foglio di condivisione del telefono."]},
  en:{title:"Find your parked car in seconds",
      sub:"Perfect for crowded car parks, trips or events. Step-by-step guidance to the exact spot.",
      badgeSave:"Save up to 3 spots in the Base version.",badgeRoute:"See your car position and follow the route.",
      badgeLang:"Italian, English and German.",badgeShare:"Share the saved position via social or messaging apps.",
      saved:"Saved places",limit:"Base limit: 3 positions",simPro:"Simulate Pro",none:"No position selected",
      n_demo:"Demo",n_feat:"Features",n_shots:"Screenshots",n_price:"Pricing",n_faq:"FAQ",
      b_demo:"Try the Demo",b_dl:"Download when available",
      btnSave:"Save here",btnRand:"Add random spot",btnClear:"Clear",
      legend:"Click on the map to place the marker ‚Ä¢ simulated coordinates",sel:"Selected details",
      featTitle:"Main features",
      features:[["Quick saves","Save up to 3 positions in the Base version (unlimited in Pro)."],
                ["Guided routes","See your car and the estimated walking/driving route."],
                ["Multilingual","Italian, English and German built-in."],
                ["Clean interface","Large buttons and clean layout for instant use."],
                ["Sharing","Send the saved location via your favorite apps."],
                ["Privacy","Data stays on device. No account required."]],
      shotsTitle:"Screenshots",priceTitle:"Versions",
      base:"Base ¬∑ Free",pro:"Pro (coming) ¬∑ TBD",
      pb:["Up to 3 saves","Banner ads","Location sharing"],
      pp:["Unlimited saves","No ads","Advanced features"],
      faqTitle:"FAQ",
      q:["Does it work underground?","Do I need an account?","How do I share the position?"],
      a:["Yes ‚Äî you can save manually when GPS is weak.",
         "No. Everything is stored locally on the device.",
         "Use the Share button to open your phone‚Äôs share sheet."]},
  de:{title:"Finde dein geparktes Auto in Sekunden",
      sub:"Ideal f√ºr volle Parkpl√§tze, Reisen oder Events. Schritt-f√ºr-Schritt zur√ºck zum exakten Platz.",
      badgeSave:"Bis zu 3 Speicherungen in der Basisversion.",badgeRoute:"Auto auf der Karte sehen und Route folgen.",
      badgeLang:"Italienisch, Englisch und Deutsch.",badgeShare:"Position √ºber Social oder Messenger teilen.",
      saved:"Speicherungen",limit:"Basislimit: 3 Positionen",simPro:"Pro simulieren",none:"Keine Position ausgew√§hlt",
      n_demo:"Demo",n_feat:"Funktionen",n_shots:"Screenshots",n_price:"Preise",n_faq:"FAQ",
      b_demo:"Demo testen",b_dl:"Download sobald verf√ºgbar",
      btnSave:"Hier speichern",btnRand:"Zuf√§lligen Platz",btnClear:"Leeren",
      legend:"Klick auf die Karte, um eine Markierung zu setzen ‚Ä¢ simulierte Koordinaten",sel:"Ausgew√§hlte Details",
      featTitle:"Hauptfunktionen",
      features:[["Schnelle Speicherungen","Bis zu 3 Pl√§tze in der Basis (unbegrenzt in Pro)."],
                ["Gef√ºhrte Wege","Auto sehen und gesch√§tzte Fu√ü-/Auto-Route."],
                ["Mehrsprachig","Italienisch, Englisch und Deutsch."],
                ["Klares UI","Gro√üe Buttons, klares Design f√ºr sofortige Nutzung."],
                ["Teilen","Gespeicherte Position √ºber Apps senden."],
                ["Datenschutz","Daten nur auf dem Ger√§t. Kein Konto n√∂tig."]],
      shotsTitle:"Screenshots",priceTitle:"Versionen",
      base:"Basis ¬∑ Kostenlos",pro:"Pro (bald) ¬∑ TBD",
      pb:["Bis zu 3 Speicherungen","Werbebanner","Positionsfreigabe"],
      pp:["Unbegrenzte Speicherungen","Keine Werbung","Erweiterte Funktionen"],
      faqTitle:"FAQ",
      q:["Funktioniert es im Untergrund?","Brauche ich ein Konto?","Wie teile ich die Position?"],
      a:["Ja ‚Äî manuell speichern, wenn GPS schwach ist.",
         "Nein. Alles lokal auf dem Ger√§t.",
         "Mit dem Teilen-Button das Share-Sheet √∂ffnen."]}
};

const $=s=>document.querySelector(s);
const state={lang:localStorage.getItem('demo_lang')||'it',isPro:localStorage.getItem('demo_isPro')==='1',points:JSON.parse(localStorage.getItem('demo_points')||'[]'),current:null,mode:localStorage.getItem('demo_mode')||'walk'};
const MAX_BASE=3;

function t(){return STR[state.lang]||STR.it;}
function setText(id, text){const el=$(id); if(el) el.textContent=text;}

function applyLang(){
  const L=t();
  // header nav
  setText('#n_demo', L.n_demo); setText('#n_feat', L.n_feat); setText('#n_shots', L.n_shots); setText('#n_price', L.n_price); setText('#n_faq', L.n_faq);
  // hero
  setText('#t_title', L.title); setText('#t_sub', L.sub);
  setText('#t_badgeSave', L.badgeSave); setText('#t_badgeRoute', L.badgeRoute); setText('#t_badgeLang', L.badgeLang); setText('#t_badgeShare', L.badgeShare);
  setText('#b_demo', L.b_demo); setText('#b_dl', L.b_dl);
  // demo
  $('#btnSaveHere').textContent=L.btnSave; $('#btnAddRandom').textContent=L.btnRand; $('#btnClear').textContent=L.btnClear;
  setText('#legend', L.legend); setText('#t_saved', L.saved); setText('#t_limit', state.isPro ? (state.lang==='en'?'Pro enabled: unlimited saves':state.lang==='de'?'Pro aktiv: unbegrenzte Speicherungen':'Pro attivo: salvataggi illimitati') : L.limit);
  setText('#sel_title', L.sel); setText('#currentMeta', L.none);
  $('#lblSimulaPro').textContent=L.simPro;
  // sections
  setText('#h_feat', L.featTitle);
  const f=L.features;
  [['#f1_t','#f1_b'],['#f2_t','#f2_b'],['#f3_t','#f3_b'],['#f4_t','#f4_b'],['#f5_t','#f5_b'],['#f6_t','#f6_b']].forEach((ids,i)=>{setText(ids[0], f[i][0]); setText(ids[1], f[i][1]);});
  setText('#h_shots', L.shotsTitle);
  setText('#h_price', L.priceTitle);
  setText('#p_base', L.base); setText('#p_pro', L.pro);
  const [pb1,pb2,pb3]=L.pb; setText('#pb1',pb1); setText('#pb2',pb2); setText('#pb3',pb3);
  const [pp1,pp2,pp3]=L.pp; setText('#pp1',pp1); setText('#pp2',pp2); setText('#pp3',pp3);
  setText('#h_faq', L.faqTitle);
  setText('#q1', L.q[0]); setText('#a1', L.a[0]); setText('#q2', L.q[1]); setText('#a2', L.a[1]); setText('#q3', L.q[2]); setText('#a3', L.a[2]);

  localStorage.setItem('demo_lang', state.lang);
}

$('#langSelect').value=state.lang;
$('#langSelect').addEventListener('change',e=>{state.lang=e.target.value;applyLang();renderList();});

/* ===== Map + demo ===== */
const canvas=$('#map'),ctx=canvas.getContext('2d'),PAD=24;let marker={x:canvas.width/2,y:canvas.height/2};
function drawPin(x,y,color='#e11d48'){ctx.save();ctx.fillStyle=color;ctx.beginPath();ctx.arc(x,y,8,0,Math.PI*2);ctx.fill();ctx.strokeStyle='#fff';ctx.lineWidth=2;ctx.stroke();ctx.restore();}
function drawGrid(){ctx.clearRect(0,0,canvas.width,canvas.height);ctx.fillStyle='#f5f7ff';ctx.fillRect(0,0,canvas.width,canvas.height);ctx.strokeStyle='#e2e8f0';for(let x=PAD;x<canvas.width;x+=40){ctx.beginPath();ctx.moveTo(x,0);ctx.lineTo(x,canvas.height);ctx.stroke();}for(let y=PAD;y<canvas.height;y+=40){ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(canvas.width,y);ctx.stroke();}ctx.strokeStyle='#cbd5e1';ctx.strokeRect(1,1,canvas.width-2,canvas.height-2);drawPin(marker.x,marker.y,'#1f2f6b');for(const p of state.points) drawPin(p.x,p.y,'#e11d48');}
function mapToLatLng(x,y){const lat=(y/canvas.height)*0.02+45.40,lng=(x/canvas.width)*0.03+9.10;return{lat:+lat.toFixed(6),lng:+lng.toFixed(6)};}
canvas.addEventListener('click',e=>{const r=canvas.getBoundingClientRect();marker.x=e.clientX-r.left;marker.y=e.clientY-r.top;drawGrid();updateCurrentMeta();});
function addRandom(){marker.x=PAD+Math.random()*(canvas.width-PAD*2);marker.y=PAD+Math.random()*(canvas.height-PAD*2);drawGrid();updateCurrentMeta();}
function persist(){localStorage.setItem('demo_points',JSON.stringify(state.points));}

function localBtn(label){ // restituisce il label tradotto
  const L=t();
  const map={Dettagli:L.lang==='en'?'Details':L.lang==='de'?'Details':'Dettagli'};
}

/* list rendering */
function detailsText(p){
  const dx=Math.abs(p.x-marker.x),dy=Math.abs(p.y-marker.y);
  const d=Math.sqrt(dx*dx+dy*dy), meters=d*1.5, km=meters/1000;
  const L=t(); const mode=state.mode==='drive'?(state.lang==='en'?'By car':'In auto'):(state.lang==='de'?'Zu Fu√ü':'A piedi');
  const speed=state.mode==='drive'?35:4.5; const minutes=Math.max(1,Math.round((km/speed)*60));
  const dist = meters<1000 ? (meters.toFixed(0)+' m') : (km.toFixed(2)+' km');
  return `${mode} ‚Ä¢ ${dist} ‚Ä¢ ~ ${minutes} min`;
}

function renderList(){
  const el=$('#list'); el.innerHTML='';
  const L=t();
  if(state.points.length===0){ el.innerHTML=`<div class="meta">${state.lang==='en'?'No saved places yet':state.lang==='de'?'Keine Speicherungen':'Nessun salvataggio al momento'}</div>`; updateCurrentMeta(); drawGrid(); return; }
  for(const p of state.points){
    const it=document.createElement('div'); it.className='item';
    const time=new Date(p.ts).toLocaleString();
    it.innerHTML = `
      <h4>Lat ${p.lat} ‚Ä¢ Lng ${p.lng}</h4>
      <div class="chips">
        <span class="chip">${time}</span>
        <span class="chip">${detailsText(p)}</span>
      </div>
      <div class="row">
        <button class="btn-sm primary" data-k="details"></button>
        <button class="btn-sm ghost" data-k="share"></button>
        <button class="btn-sm" data-k="copy"></button>
        <button class="btn-sm danger" data-k="delete"></button>
      </div>`;
    el.appendChild(it);

    const labels = {
      it:{details:"Dettagli",share:"Condividi",copy:"Copia coordinate",delete:"Elimina"},
      en:{details:"Details",share:"Share",copy:"Copy coords",delete:"Delete"},
      de:{details:"Details",share:"Teilen",copy:"Koordinaten kopieren",delete:"L√∂schen"}
    }[state.lang];

    it.querySelectorAll('button').forEach(b=>{ b.textContent = labels[b.dataset.k]; });

    const [bDet,bShare,bCopy,bDel] = it.querySelectorAll('button');
    bDet.addEventListener('click',()=>{state.current=p.id;marker.x=p.x;marker.y=p.y;updateCurrentMeta();drawGrid();window.scrollTo({top:document.getElementById('demo').offsetTop-10,behavior:'smooth'});});
    bShare.addEventListener('click',()=>{const txt=`${state.lang==='en'?'Saved position':'Posizione salvata'}: ${p.lat}, ${p.lng}`; if(navigator.share){navigator.share({title:'Trova Auto',text:txt}).catch(()=>navigator.clipboard.writeText(txt));} else {navigator.clipboard.writeText(txt).then(()=>alert(state.lang==='en'?'Copied to clipboard':'Copiato negli appunti'));}});
    bCopy.addEventListener('click',()=>navigator.clipboard.writeText(`${p.lat}, ${p.lng}`).then(()=>alert(state.lang==='en'?'Copied to clipboard':'Copiato negli appunti')));
    bDel.addEventListener('click',()=>{state.points=state.points.filter(x=>x.id!==p.id); if(state.current===p.id) state.current=null; persist(); renderList();});
  }
  updateCurrentMeta(); drawGrid();
}

function updateCurrentMeta(){
  const L=t();
  if(!state.current){ $('#currentMeta').textContent=L.none; return; }
  const p = state.points.find(x=>x.id===state.current);
  if(!p){ $('#currentMeta').textContent=L.none; return; }
  $('#currentMeta').textContent = `‚Üí ${p.lat}, ${p.lng} (${detailsText(p)})`;
}

/* events */
document.getElementById('btnSaveHere').addEventListener('click', ()=> {
  const {lat,lng}=mapToLatLng(marker.x,marker.y);
  if(!state.isPro && state.points.length>=MAX_BASE){
    alert(state.lang==='en'?'Base limit reached (3). Enable Pro to unlock.':state.lang==='de'?'Basislimit erreicht (3). Pro aktivieren.':'Limite versione base: 3 salvataggi. Attiva "Simula Pro" per illimitati.');
    return;
  }
  state.points.unshift({id:Date.now(),x:marker.x,y:marker.y,lat,lng,ts:Date.now(),mode:state.mode});
  persist(); renderList();
});
document.getElementById('btnAddRandom').addEventListener('click', addRandom);
document.getElementById('btnClear').addEventListener('click', ()=>{ if(confirm(state.lang==='en'?'Clear all saves?':state.lang==='de'?'Alle Speicherungen l√∂schen?':'Svuotare tutti i salvataggi?')){ state.points=[]; state.current=null; persist(); renderList(); }});
document.getElementById('proToggle').checked = state.isPro;
document.getElementById('proToggle').addEventListener('change', e=>{ state.isPro=e.target.checked; localStorage.setItem('demo_isPro', state.isPro?'1':'0'); applyLang(); });
document.getElementById('modeSelect').value = state.mode;
document.getElementById('modeSelect').addEventListener('change', e=>{ state.mode=e.target.value; localStorage.setItem('demo_mode',state.mode); renderList(); });

/* boot */
document.getElementById('langSelect').value=state.lang;
document.getElementById('langSelect').addEventListener('change', e=>{ state.lang=e.target.value; applyLang(); renderList(); });
applyLang(); renderList(); (function first(){ addRandom(); })();
</script>
</body>
</html>
